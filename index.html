<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Military Loadout Generator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            text-align: center;
            background-color: #121212;
            color: #f0f0f0;
        }

        h1 {
            font-size: 36px;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 14px;
            color: #aaa;
            margin-bottom: 20px;
        }

        select, button, input {
            padding: 10px 20px;
            font-size: 18px;
            margin-top: 10px;
            margin-bottom: 10px;
            background-color: #333;
            color: #f0f0f0;
            border: none;
            border-radius: 5px;
        }

        input {
            width: 200px;
        }

        button {
            cursor: pointer;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #555;
        }

        #loadout {
            margin-top: 30px;
            font-size: 22px;
            line-height: 1.6;
            text-align: left;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            padding: 20px;
            background-color: #1a1a1a;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
        }

        img {
            width: 100%;
            max-width: 400px;
            display: block;
            margin: 20px auto;
            border-radius: 10px;
        }

        ul {
            list-style-type: none;
            padding: 0;
        }

        li {
            padding: 5px 0;
            border-bottom: 1px solid #333;
        }

        .oc-details {
            background-color: #2a2a2a;
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .control-group {
            margin: 0 10px;
        }

        .save-loadout {
            background-color: #4CAF50;
            margin-left: 10px;
        }

        .saved-loadouts {
            margin-top: 20px;
            text-align: left;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .loadout-item {
            background-color: #1a1a1a;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .loadout-item:hover {
            background-color: #2a2a2a;
        }

        .tab {
            overflow: hidden;
            border: 1px solid #333;
            background-color: #1a1a1a;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .tab button {
            background-color: inherit;
            float: left;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 14px 16px;
            transition: 0.3s;
            font-size: 17px;
        }

        .tab button:hover {
            background-color: #333;
        }

        .tab button.active {
            background-color: #444;
        }

        .tabcontent {
            display: none;
            padding: 6px 12px;
            border-top: none;
        }

        .character-image {
            width: 150px;
            height: 150px;
            background-color: #333;
            border-radius: 10px;
            margin: 10px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #aaa;
            font-style: italic;
        }
    </style>
</head>
<body>
    <h1>Glockodile's Random Military Loadout Generator</h1>
    <div class="subtitle">Create unique characters for your stories, games, or RPG campaigns</div>

    <img src="assets/military.gif" alt="Military GIF">

    <div class="tab">
        <button class="tablinks active" onclick="openTab(event, 'Generator')">Loadout Generator</button>
        <button class="tablinks" onclick="openTab(event, 'Saved')">Saved Characters</button>
        <button class="tablinks" onclick="openTab(event, 'OCDetails')">OC Details</button>
    </div>

    <div id="Generator" class="tabcontent" style="display: block;">
        <div class="controls">
            <div class="control-group">
                <label for="era">Choose Era:</label><br>
                <select id="era">
                    <option value="Modern">Cold War/Modern</option>
                    <option value="WW2">World War II</option>
                    <option value="NearFuture">Near Future</option>
                </select>
            </div>

            <div class="control-group">
                <label for="faction">Choose Faction:</label><br>
                <select id="faction">
                    <option value="Western">Western</option>
                    <option value="Soviet">Soviet/Russian</option>
                    <option value="All">All Factions</option>
                    <option value="Mercenary">Mercenary</option>
                    <option value="Insurgent">Insurgent</option>
                </select>
            </div>

            <div class="control-group">
                <label for="class">Choose Class:</label><br>
                <select id="class">
                    <option value="Sniper">Sniper</option>
                    <option value="MachineGunner">Machine Gunner</option>
                    <option value="Rifleman">Rifleman</option>
                    <option value="Grenadier">Grenadier</option>
                    <option value="AntiTank">Anti-Tank</option>
                    <option value="Tanker">Tanker</option>
                    <option value="Medic">Medic</option>
                    <option value="Engineer">Engineer</option>
                    <option value="Recon">Recon</option>
                </select>
            </div>
        </div>

        <div class="controls">
            <div class="control-group">
                <label for="characterName">Character Name:</label><br>
                <input type="text" id="characterName" placeholder="Optional">
            </div>

            <div class="control-group">
                <label for="specialization">Specialization:</label><br>
                <select id="specialization">
                    <option value="Standard">Standard</option>
                    <option value="Urban">Urban Warfare</option>
                    <option value="Woodland">Woodland</option>
                    <option value="Desert">Desert</option>
                    <option value="Arctic">Arctic</option>
                    <option value="NightOps">Night Operations</option>
                    <option value="Airborne">Airborne</option>
                    <option value="Maritime">Maritime</option>
                </select>
            </div>
        </div>

        <button onclick="generateLoadout()">Generate Loadout</button>
        <button onclick="randomizeAll()" style="background-color: #2196F3;">Randomize All</button>
        <button class="save-loadout" onclick="saveLoadout()">Save Character</button>
    </div>

    <div id="Saved" class="tabcontent">
        <h2>Saved Characters</h2>
        <div id="savedLoadouts" class="saved-loadouts">
            <!-- Saved loadouts will appear here -->
        </div>
    </div>

    <div id="OCDetails" class="tabcontent">
        <h2>Original Character Details</h2>
        <div id="ocDetailsContainer">
            <p>Generate a loadout first to see character details.</p>
        </div>
    </div>

    <div id="loadout"></div>

<script>
    // Expanded Modern Era Equipment
    const modernHelmets = {
        Western: [
            "M1 Helmet", "PASGT Helmet", "MICH TC-2000", "MK6 Helmet", 
            "SPECTRA Helmet", "SSh-68 (Captured)", "Brodie Helmet (Reserve)",
            "Pro-Tec Skate Helmet (SF)", "Rhino II Paratrooper Helmet",
            "CGF Combat Helmet (Canada)", "M92 Helmet (Germany)", "ACH Helmet",
            "ECH Helmet", "FAST Helmet", "Team Wendy EXFIL", "Ops-Core FAST"
        ],
        Soviet: [
            "SSh-40", "SSh-60", "SSh-68", "ZSH-1-2M", "6B6 Helmet",
            "Tanker Helmet TK-3", "VZM-1 Paratrooper Helmet",
            "KZS-2 Fiberglass Helmet", "Altyn (Early Prototype)",
            "Czech M53 Helmet", "Polish Wz.50", "6B7 Helmet", "6B27 Helmet",
            "6B47 Ratnik Helmet", "K6-3 Helmet", "ZSH-1-2"
        ],
        Mercenary: [
            "Custom Painted FAST Helmet", "Mixed Faction Helmet", 
            "Commercial Bump Helmet", "Surplus PASGT", "Captured Enemy Helmet",
            "Custom Modified Helmet", "High-Cut Special Forces Helmet"
        ],
        Insurgent: [
            "Civilian Hard Hat", "Sports Helmet", "No Helmet", "Bandana",
            "Shemagh", "Baseball Cap", "Beanie", "Captured Army Helmet"
        ]
    };

    const modernArmor = {
        Western: [
            "M1952A Flak Vest", "PASGT Vest", "RBA Vest (UK)", 
            "IBA (Interceptor) Early Version", "SAS Smock (Reinforced)",
            "German KSK Splinter Vest", "French Gilet Para",
            "USMC PACA (1980s)", "ALICE Webbing System",
            "Israeli RZ 76-1 Vest", "SPCS Plate Carrier", "IOTV",
            "CIRAS Maritime", "JPC Plate Carrier", "Crye Precision AVS"
        ],
        Soviet: [
            "6B2 Vest", "6B3 Zh-85", "6B5-15", "ChZh-81 Chest Rig",
            "Soviet SN-42 (Surplus)", "Bulgarian Breastplate M1972",
            "Polish Kamizelka Wz.89", "East German Kampfweste",
            "Czech VZ.53", "Hungarian M59 Flak Jacket", "6B13 Vest",
            "6B23 Vest", "6B45 Ratnik Vest", "Partizan Harness System"
        ],
        Mercenary: [
            "Commercial Plate Carrier", "Mixed Faction Armor", 
            "Customized Chest Rig", "Surplus Flak Vest", "Lightweight Carrier",
            "High-End Tactical Vest", "Modified Military Armor"
        ],
        Insurgent: [
            "Improvised Armor", "Civilian Vest", "No Armor", "Chest Rig",
            "Webbing Only", "Captured Body Armor", "Repurposed Sports Gear"
        ]
    };

    // Expanded primary weapons with more variety
    const modernPrimaryWeapons = {
        Western: {
            Sniper: [
                "M21 Sniper Weapon System", "M40A1", "M24", "HK PSG1", 
                "Walther WA 2000", "FR-F1 (France)", "L42A1 Enfield",
                "Sako TRG-21", "Steyr SSG 69", "M14 Sniper Variant",
                "Barrett M82A1", "Accuracy International AWM",
                "CheyTac Intervention", "Desert Tech SRS", "Blaser R93"
            ],
            MachineGunner: [
                "M60", "M249 (Early Model)", "FN MAG", "Bren L4", 
                "MG3 (West German)", "Stoner 63", "M1919A6 (Reserve)",
                "HK21", "Ultimax 100 (Early Model)", "AAT-52 (France)",
                "M240B", "Mk 48", "HK MG5", "Negev NG7", "KAC LAMG"
            ],
            Rifleman: [
                "M16A1", "M16A2", "FN FAL", "G3A3", "Steyr AUG A1",
                "L1A1 SLR", "Beretta AR70", "SIG SG 542",
                "IMI Galil ARM", "Daewoo K2", "M14", "M1 Garand (Reserve)",
                "H&K G41", "FAMAS F1", "CETME Model L", "HK416", "SCAR-L",
                "Bushmaster ACR", "Tavor TAR-21", "CZ BREN 2"
            ],
            Grenadier: [
                "M16A1 with M203", "M79 Thumper", "HK69A1",
                "FN FALO with Energa", "M1A1 Carbine with M8 Launcher",
                "L1A1 with SUIT Sight", "BM-59 with GL", "M4 with M320",
                "HK416 with AG36", "SCAR-H with EGLM", "Tavor with GL"
            ],
            AntiTank: [
                "M3A1 Grease Gun", "Sterling L2A3", "Carl Gustaf M2",
                "M20 Super Bazooka", "M67 Recoilless Rifle",
                "LAW 80 (UK)", "MATADOR (Early Model)", "FGM-148 Javelin",
                "SMAW", "AT4", "Panzerfaust 3", "MBT LAW"
            ],
            Tanker: [
                "M3 Grease Gun", "Sterling SMG", "Uzi", "MAC-10",
                "Beretta M12", "S&W 76", "M1 Carbine (Tanker Model)",
                "MP5", "MP7", "P90", "B&T APC9"
            ],
            Medic: [
                "M4 Carbine", "HK G36C", "SIG SG 552", "M1A1 Carbine",
                "Short-Barreled AR-15", "Compact Battle Rifle"
            ],
            Engineer: [
                "M16A2", "HK G36", "SIG SG 550", "Shotgun (Breaching)",
                "Compact Carbine", "Folding Stock Rifle"
            ],
            Recon: [
                "Mk 12 SPR", "HK417", "SCAR-H", "SR-25", "L129A1",
                "Designated Marksman Rifle", "Recce Rifle"
            ]
        },
        Soviet: {
            Sniper: [
                "SVD Dragunov", "SV-98", "VSS Vintorez", "Mosin Nagant PU",
                "PSL (Romak-3)", "KSVK 12.7mm", "Tabuk Sniper (Iraq)",
                "Zastava M76", "SWD-M (China)", "SVU-A", "OSV-96",
                "VSSK Vychlop", "T-5000", "SV-99"
            ],
            MachineGunner: [
                "PKM", "RPK-74", "RPD", "DP-28 (Reserve)", "SG-43 Gorunov",
                "UKM-2000 (Polish)", "KPV Heavy MG", "NSV Utyos", "PKP Pecheneg",
                "RPK-16", "AEK-999", "Type 80 (China)"
            ],
            Rifleman: [
                "AKM", "AK-74", "AKS-74U", "AK-47 Type 3", "AMD-65",
                "PM md. 63/65 (Romania)", "Wz. 88 Tantal (Poland)",
                "Norinco Type 56", "Vz. 58 (Czech)", "MPi-KMS (East Germany)",
                "AK-74N (Night Vision)", "AN-94 Abakan (Prototype)",
                "TKB-022PM (Experimental)", "AS Val (1980s)", "AK-12",
                "AK-15", "AK-100 Series", "AEK-971", "OTs-14 Groza"
            ],
            Grenadier: [
                "AKM with GP-25", "AK-74 with GP-30", "RPG-75",
                "RPG-18 Mukha", "AGS-17 Plamya", "RG-6 Revolver Grenade Launcher",
                "AK-12 with GP-34", "OTs-14 with Grenade Launcher"
            ],
            AntiTank: [
                "RPG-7V", "RPG-16", "SPG-9", "9K111 Fagot", 
                "9M14 Malyutka", "RPG-29 Vampir (Prototype)",
                "B-10 Recoilless Rifle", "9K115-2 Metis-M", "RPG-32",
                "9K135 Kornet", "RShG-1"
            ],
            Tanker: [
                "APS Stechkin", "PPSh-41 (Reserve)", "PP-91 KEDR",
                "AKS-74U", "OTs-02 Kiparis", "PP-19 Bizon (Early Model)",
                "PP-2000", "SR-2 Veresk", "Vityaz-SN"
            ],
            Medic: [
                "AKS-74U", "AK-102", "AK-104", "Compact AK Variant",
                "Shortened Rifle"
            ],
            Engineer: [
                "AK-74", "AKM", "Shotgun", "Compact Rifle", "Folding Stock AK"
            ],
            Recon: [
                "SVDS", "VSS Vintorez", "AS Val", "AK-74 with Optics",
                "Designated Marksman AK", "Sniper AK Variant"
            ]
        },
        Mercenary: {
            Sniper: [
                "Mixed Faction Sniper Rifle", "Commercial Precision Rifle",
                "Surplus Sniper System", "Custom Built Sniper Rifle"
            ],
            MachineGunner: [
                "Mixed Faction Machine Gun", "Belt-Fed Conversion",
                "Commercial LMG", "Surplus Machine Gun"
            ],
            Rifleman: [
                "Mixed Faction Rifle", "Commercial AR-15", "Surplus Battle Rifle",
                "Custom Built Carbine", "Whatever Works"
            ],
            Grenadier: [
                "Mixed Faction Grenade Launcher", "Standalone Grenade Launcher",
                "Custom Setup", "Improvised Launcher"
            ],
            AntiTank: [
                "Mixed Faction AT Weapon", "Commercial AT System",
                "Surplus AT Weapon", "Improvised AT Device"
            ],
            Tanker: [
                "Compact SMG", "Pistol Carbine", "Short Rifle", "Personal Defense Weapon"
            ],
            Medic: [
                "Compact Carbine", "SMG", "Light Rifle", "Personal Defense Weapon"
            ],
            Engineer: [
                "Compact Rifle", "Shotgun", "SMG", "Breaching Setup"
            ],
            Recon: [
                "Designated Marksman Rifle", "Precision Carbine", "Sniper System"
            ]
        },
        Insurgent: {
            Sniper: [
                "Hunting Rifle with Scope", "Surplus Sniper Rifle",
                "Mosin-Nagant", "Enfield", "DIY Sniper Rifle"
            ],
            MachineGunner: [
                "RPD", "PKM", "M60", "FN MAG", "DIY Machine Gun",
                "Converted Rifle", "Belt-Fed Weapon"
            ],
            Rifleman: [
                "AK-47", "SKS", "M16", "FAL", "Hunting Rifle",
                "Shotgun", "Whatever Available"
            ],
            Grenadier: [
                "RPG-7", "Improvised Grenade Launcher", "Standalone Launcher",
                "Rifle Grenade", "DIY Launcher"
            ],
            AntiTank: [
                "RPG-7", "RPG-2", "Improvised AT Device", "IED",
                "Surplus AT Weapon"
            ],
            Tanker: [
                "Pistol", "SMG", "Short Rifle", "Improvised Weapon"
            ],
            Medic: [
                "Pistol", "Compact Rifle", "SMG", "No Weapon"
            ],
            Engineer: [
                "Rifle", "Shotgun", "SMG", "Breaching Tools"
            ],
            Recon: [
                "Scoped Rifle", "Designated Marksman Rifle", "Sniper Rifle"
            ]
        }
    };

    // Near Future Equipment
    const nearFutureHelmets = {
        Western: [
            "Enhanced Combat Helmet (ECH)", "Future Assault Shell Technology (FAST)",
            "Integrated Tactical Helmet", "Advanced Combat Helmet Gen II",
            "Digital Battle Helmet", "Smart Helmet System"
        ],
        Soviet: [
            "Ratnik-2 Helmet System", "Future Soldier Helmet",
            "Integrated Combat Helmet", "Advanced Ratnik Helmet"
        ],
        Mercenary: [
            "Commercial Advanced Helmet", "Modified Military Helmet",
            "Custom Tactical Helmet", "High-Tech Headgear"
        ],
        Insurgent: [
            "Captured Advanced Helmet", "Modified Commercial Helmet",
            "Basic Protection", "Improvised High-Tech Helmet"
        ]
    };

    const nearFutureArmor = {
        Western: [
            "IOTV Gen IV", "SPCS Advanced", "Future Force Warrior System",
            "Tactical Assault Light Operator Suit (TALOS)",
            "Integrated Plate Carrier System", "Exoskeleton-Compatible Armor"
        ],
        Soviet: [
            "Ratnik-3 Armor System", "Future Soldier Exosuit",
            "Integrated Combat Armor", "Advanced Body Protection System"
        ],
        Mercenary: [
            "Commercial Advanced Armor", "Custom Tactical System",
            "Modified Military Armor", "High-End Protection"
        ],
        Insurgent: [
            "Captured Advanced Armor", "Improvised High-Tech Protection",
            "Commercial Body Armor", "Mixed Protection System"
        ]
    };

    // Character traits and backgrounds
    const characterTraits = [
        "Quiet and observant", "Aggressive and direct", "Calm under pressure",
        "Nervous but competent", "Humorous and lighthearted", "Serious and focused",
        "Team player", "Lone wolf", "By-the-book", "Improviser",
        "Risk-taker", "Cautious", "Leader", "Follower", "Mentor", "Student"
    ];

    const backgrounds = {
        Western: [
            "Regular Army", "Special Forces", "Reservist", "National Guard",
            "Contractor", "Law Enforcement", "Private Military", "Volunteer"
        ],
        Soviet: [
            "Regular Army", "Spetsnaz", "Conscript", "VDV (Airborne)",
            "Border Guards", "Internal Troops", "Militia", "Volunteer"
        ],
        Mercenary: [
            "Former Special Forces", "Ex-Military", "Adventurer", "Gun for Hire",
            "Survivalist", "Professional Soldier", "Freedom Fighter"
        ],
        Insurgent: [
            "Freedom Fighter", "Local Militia", "Volunteer", "Conscripted",
            "Ideological Fighter", "Mercenary", "Local Defender"
        ]
    };

    const specialties = {
        Urban: ["CQB Specialist", "Room Clearing Expert", "Urban Sniper"],
        Woodland: ["Tracker", "Wilderness Expert", "Camouflage Master"],
        Desert: ["Desert Survival Expert", "Long-Range Specialist"],
        Arctic: ["Cold Weather Expert", "Winter Warfare Specialist"],
        NightOps: ["Night Vision Expert", "Low-Light Specialist"],
        Airborne: ["Paratrooper", "Air Assault Expert"],
        Maritime: ["Combat Diver", "Naval Infantry", "Beach Assault Expert"]
    };

    // Function to get random item from array
    function getRandomItem(arr) {
        return arr[Math.floor(Math.random() * arr.length)];
    }

    // Function to generate a callsign
    function generateCallsign() {
        const prefixes = ["Alpha", "Bravo", "Charlie", "Delta", "Echo", "Foxtrot", 
                         "Ghost", "Hunter", "Viper", "Shadow", "Raven", "Wolf"];
        const suffixes = ["1", "2", "3", "Actual", "Leader", "Sniper", "Gunner", 
                         "Medic", "Engineer", "Recon", "Six"];
        return `${getRandomItem(prefixes)}-${getRandomItem(suffixes)}`;
    }

    // Function to generate character backstory
    function generateBackstory(faction, specialization, className) {
        const background = getRandomItem(backgrounds[faction]);
        const trait = getRandomItem(characterTraits);
        const specialty = getRandomItem(specialties[specialization] || ["Specialist"]);
        
        return `${background} with a ${specialty} qualification. Known for being ${trait}.`;
    }

    // Function to open tabs
    function openTab(evt, tabName) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(tabName).style.display = "block";
        evt.currentTarget.className += " active";
    }

    // Function to randomize all options
    function randomizeAll() {
        const eras = ["Modern", "WW2", "NearFuture"];
        const factions = ["Western", "Soviet", "All", "Mercenary", "Insurgent"];
        const classes = ["Sniper", "MachineGunner", "Rifleman", "Grenadier", 
                        "AntiTank", "Tanker", "Medic", "Engineer", "Recon"];
        const specializations = ["Standard", "Urban", "Woodland", "Desert", 
                                "Arctic", "NightOps", "Airborne", "Maritime"];
        
        document.getElementById("era").value = getRandomItem(eras);
        document.getElementById("faction").value = getRandomItem(factions);
        document.getElementById("class").value = getRandomItem(classes);
        document.getElementById("specialization").value = getRandomItem(specializations);
        
        // Generate a random name
        const firstNames = ["John", "James", "Robert", "Michael", "David", "Richard", 
                           "Alex", "Chris", "Mark", "Paul", "Ivan", "Dmitri", "Sergei",
                           "Hans", "Karl", "Friedrich", "Mohammed", "Ahmed", "Hassan"];
        const lastNames = ["Smith", "Johnson", "Williams", "Brown", "Jones", "Miller",
                          "Davis", "Wilson", "Anderson", "Taylor", "Ivanov", "Petrov",
                          "Sidorov", "Kuznetsov", "Schmidt", "Müller", "Weber", "Khan"];
        
        document.getElementById("characterName").value = 
            `${getRandomItem(firstNames)} ${getRandomItem(lastNames)}`;
        
        generateLoadout();
    }

    // Function to save the current loadout
    function saveLoadout() {
        const loadoutElement = document.getElementById("loadout");
        if (!loadoutElement.innerHTML) {
            alert("Please generate a loadout first!");
            return;
        }
        
        const savedLoadouts = JSON.parse(localStorage.getItem("savedLoadouts") || "[]");
        const loadoutData = {
            name: document.getElementById("characterName").value || "Unnamed Soldier",
            era: document.getElementById("era").value,
            faction: document.getElementById("faction").value,
            class: document.getElementById("class").value,
            specialization: document.getElementById("specialization").value,
            html: loadoutElement.innerHTML,
            timestamp: new Date().toLocaleString()
        };
        
        savedLoadouts.push(loadoutData);
        localStorage.setItem("savedLoadouts", JSON.stringify(savedLoadouts));
        
        alert("Character saved!");
        displaySavedLoadouts();
    }

    // Function to display saved loadouts
    function displaySavedLoadouts() {
        const savedLoadouts = JSON.parse(localStorage.getItem("savedLoadouts") || "[]");
        const container = document.getElementById("savedLoadouts");
        
        if (savedLoadouts.length === 0) {
            container.innerHTML = "<p>No saved characters yet.</p>";
            return;
        }
        
        container.innerHTML = savedLoadouts.map((loadout, index) => `
            <div class="loadout-item" onclick="loadSavedLoadout(${index})">
                <strong>${loadout.name}</strong> - ${loadout.era} ${loadout.faction} ${loadout.class}<br>
                <small>Saved: ${loadout.timestamp}</small>
            </div>
        `).join("");
    }

    // Function to load a saved loadout
    function loadSavedLoadout(index) {
        const savedLoadouts = JSON.parse(localStorage.getItem("savedLoadouts") || "[]");
        if (index >= 0 && index < savedLoadouts.length) {
            const loadout = savedLoadouts[index];
            document.getElementById("characterName").value = loadout.name;
            document.getElementById("era").value = loadout.era;
            document.getElementById("faction").value = loadout.faction;
            document.getElementById("class").value = loadout.class;
            document.getElementById("specialization").value = loadout.specialization;
            document.getElementById("loadout").innerHTML = loadout.html;
            openTab(event, 'Generator');
        }
    }

    // Function to generate OC details
    function generateOCDetails(faction, specialization, className, characterName) {
        const callsign = generateCallsign();
        const backstory = generateBackstory(faction, specialization, className);
        
        return `
            <div class="oc-details">
                <h3>${characterName || "Unnamed Soldier"} - "${callsign}"</h3>
                <div class="character-image">Character Portrait</div>
                <p><strong>Background:</strong> ${backstory}</p>
                <p><strong>Specialization:</strong> ${specialization} Operations</p>
                <p><strong>Role:</strong> ${className}</p>
                <p><strong>Faction:</strong> ${faction}</p>
                <p><strong>Notable Traits:</strong> ${getRandomItem(characterTraits)}</p>
                <p><strong>Preferred Engagement Range:</strong> ${getRandomItem(["Close Quarters", "Medium Range", "Long Range"])}</p>
                <p><strong>Combat Style:</strong> ${getRandomItem(["Methodical", "Aggressive", "Adaptive", "Stealthy"])}</p>
            </div>
        `;
    }

    // Main loadout generation function
    function generateLoadout() {
        const era = document.getElementById("era").value;
        const faction = document.getElementById("faction").value;
        const selectedClass = document.getElementById("class").value;
        const specialization = document.getElementById("specialization").value;
        const characterName = document.getElementById("characterName").value;

        // Equipment pools based on era
        let helmetsPool, armorPool, primaryWeaponsPool, secondaryWeaponsPool, 
            grenadesPool, gadgetsPool, clothesPool, clothesStylePool, rocketLaunchersPool;

        if (era === "Modern") {
            helmetsPool = modernHelmets;
            armorPool = modernArmor;
            primaryWeaponsPool = modernPrimaryWeapons;
            // ... (other modern equipment)
        } else if (era === "NearFuture") {
            helmetsPool = nearFutureHelmets;
            armorPool = nearFutureArmor;
            // Use modern weapons for near future for now
            primaryWeaponsPool = modernPrimaryWeapons;
            // ... (other near future equipment)
        } else { // WW2
            // Use existing WW2 equipment
            helmetsPool = ww2Helmets;
            armorPool = ww2Armor;
            primaryWeaponsPool = ww2PrimaryWeapons;
            // ... (other WW2 equipment)
        }

        // Generate loadout items
        const helmet = getRandomItem(
            faction === "All" ? 
            helmetsPool.Western.concat(helmetsPool.Soviet) : 
            helmetsPool[faction] || helmetsPool.Western
        );

        let bodyArmor = getRandomItem(
            faction === "All" ? 
            armorPool.Western.concat(armorPool.Soviet) : 
            armorPool[faction] || armorPool.Western
        );
        
        if (selectedClass === "Tanker") {
            bodyArmor = era === "Modern" ? "Light Rig" : "Tanker's Equipment Belt";
        }

        const primaryWeapon = getRandomItem(
            faction === "All" ? 
            primaryWeaponsPool.Western[selectedClass].concat(primaryWeaponsPool.Soviet[selectedClass]) : 
            (primaryWeaponsPool[faction] && primaryWeaponsPool[faction][selectedClass]) ? 
            primaryWeaponsPool[faction][selectedClass] : 
            primaryWeaponsPool.Western[selectedClass]
        );

        // Generate other equipment (secondary, grenades, etc.)
        // ... (rest of equipment generation)

        // Generate OC details
        const ocDetails = generateOCDetails(faction, specialization, selectedClass, characterName);

        // Display the loadout
        document.getElementById("loadout").innerHTML = `
            <h2>${characterName ? characterName + "'s" : "Your"} ${era} ${faction === "All" ? "Mixed Faction" : faction} ${selectedClass} Loadout:</h2>
            <ul>
                <li><strong>Helmet:</strong> ${helmet}</li>
                <li><strong>Body Armor:</strong> ${bodyArmor}</li>
                <li><strong>Primary Weapon:</strong> ${primaryWeapon}</li>
                <li><strong>Specialization:</strong> ${specialization}</li>
            </ul>
            ${ocDetails}
        `;

        // Update OC details tab
        document.getElementById("ocDetailsContainer").innerHTML = ocDetails;
    }

    // Initialize the page
    window.onload = function() {
        displaySavedLoadouts();
    };
</script>
</body>
</html>
