<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Military Loadout Generator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            text-align: center;
            background-color: #121212;
            color: #f0f0f0;
        }

        h1 {
            font-size: 36px;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 14px;
            color: #aaa;
            margin-bottom: 20px;
        }

        select, button, input {
            padding: 10px 20px;
            font-size: 18px;
            margin-top: 10px;
            margin-bottom: 10px;
            background-color: #333;
            color: #f0f0f0;
            border: none;
            border-radius: 5px;
        }

        input {
            width: 200px;
        }

        button {
            cursor: pointer;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #555;
        }

        #loadout {
            margin-top: 30px;
            font-size: 22px;
            line-height: 1.6;
            text-align: left;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            padding: 20px;
            background-color: #1a1a1a;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
        }

        img {
            width: 100%;
            max-width: 400px;
            display: block;
            margin: 20px auto;
            border-radius: 10px;
        }

        ul {
            list-style-type: none;
            padding: 0;
        }

        li {
            padding: 5px 0;
            border-bottom: 1px solid #333;
        }

        .oc-details {
            background-color: #2a2a2a;
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .control-group {
            margin: 0 10px;
        }

        .save-loadout {
            background-color: #4CAF50;
            margin-left: 10px;
        }

        .saved-loadouts {
            margin-top: 20px;
            text-align: left;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .loadout-item {
            background-color: #1a1a1a;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .loadout-item:hover {
            background-color: #2a2a2a;
        }

        .tab {
            overflow: hidden;
            border: 1px solid #333;
            background-color: #1a1a1a;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .tab button {
            background-color: inherit;
            float: left;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 14px 16px;
            transition: 0.3s;
            font-size: 17px;
        }

        .tab button:hover {
            background-color: #333;
        }

        .tab button.active {
            background-color: #444;
        }

        .tabcontent {
            display: none;
            padding: 6px 12px;
            border-top: none;
        }

        .character-image {
            width: 150px;
            height: 150px;
            background-color: #333;
            border-radius: 10px;
            margin: 10px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #aaa;
            font-style: italic;
        }

        .appearance-details {
            background-color: #333;
            padding: 15px;
            border-radius: 5px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>Glockodile's Random Military Loadout Generator</h1>
    <div class="subtitle">Create unique characters for your stories, games, or RPG campaigns</div>

    <img src="assets/military.gif" alt="Military GIF">

    <div class="tab">
        <button class="tablinks active" onclick="openTab(event, 'Generator')">Loadout Generator</button>
        <button class="tablinks" onclick="openTab(event, 'Saved')">Saved Characters</button>
        <button class="tablinks" onclick="openTab(event, 'OCDetails')">OC Details</button>
    </div>

    <div id="Generator" class="tabcontent" style="display: block;">
        <div class="controls">
            <div class="control-group">
                <label for="era">Choose Era:</label><br>
                <select id="era">
                    <option value="Modern">Cold War/Modern</option>
                    <option value="WW2">World War II</option>
                    <option value="NearFuture">Near Future</option>
                </select>
            </div>

            <div class="control-group">
                <label for="faction">Choose Faction:</label><br>
                <select id="faction">
                    <option value="Western">Western</option>
                    <option value="Soviet">Soviet/Russian</option>
                    <option value="All">All Factions</option>
                    <option value="Mercenary">Mercenary</option>
                    <option value="Insurgent">Insurgent</option>
                </select>
            </div>

            <div class="control-group">
                <label for="class">Choose Class:</label><br>
                <select id="class">
                    <option value="Sniper">Sniper</option>
                    <option value="MachineGunner">Machine Gunner</option>
                    <option value="Rifleman">Rifleman</option>
                    <option value="Grenadier">Grenadier</option>
                    <option value="AntiTank">Anti-Tank</option>
                    <option value="Tanker">Tanker</option>
                    <option value="Medic">Medic</option>
                    <option value="Engineer">Engineer</option>
                    <option value="Recon">Recon</option>
                </select>
            </div>

            <div class="control-group">
                <label for="gender">Choose Gender:</label><br>
                <select id="gender">
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                </select>
            </div>
        </div>

        <div class="controls">
            <div class="control-group">
                <label for="characterName">Character Name:</label><br>
                <input type="text" id="characterName" placeholder="Optional">
            </div>

            <div class="control-group">
                <label for="specialization">Specialization:</label><br>
                <select id="specialization">
                    <option value="Standard">Standard</option>
                    <option value="Urban">Urban Warfare</option>
                    <option value="Woodland">Woodland</option>
                    <option value="Desert">Desert</option>
                    <option value="Arctic">Arctic</option>
                    <option value="NightOps">Night Operations</option>
                    <option value="Airborne">Airborne</option>
                    <option value="Maritime">Maritime</option>
                </select>
            </div>
        </div>

        <button onclick="generateLoadout()">Generate Loadout</button>
        <button onclick="randomizeAll()" style="background-color: #2196F3;">Randomize All</button>
        <button class="save-loadout" onclick="saveLoadout()">Save Character</button>
    </div>

    <div id="Saved" class="tabcontent">
        <h2>Saved Characters</h2>
        <div id="savedLoadouts" class="saved-loadouts">
            <!-- Saved loadouts will appear here -->
        </div>
    </div>

    <div id="OCDetails" class="tabcontent">
        <h2>Original Character Details</h2>
        <div id="ocDetailsContainer">
            <p>Generate a loadout first to see character details.</p>
        </div>
    </div>

    <div id="loadout"></div>

<script>
    // Name banks organized by nationality and gender
    const nameBank = {
        Western: {
            Male: {
                firstNames: ["John", "James", "Robert", "Michael", "David", "Richard", "Thomas", "Christopher", "Daniel", "Matthew", "Anthony", "Donald", "Mark", "Paul", "Steven", "Kenneth", "Andrew", "Joshua", "Kevin", "Brian", "George", "Edward", "Ronald", "Timothy", "Jason", "Jeffrey", "Ryan", "Jacob", "Gary", "Nicholas", "Eric", "Jonathan", "Stephen", "Larry", "Justin", "Scott", "Brandon", "Frank", "Gregory", "Raymond", "Alexander", "Patrick", "Jack", "Dennis", "Jerry", "Tyler", "Aaron", "Henry", "Douglas", "Nathan", "Peter", "Zachary", "Kyle", "William", "Carlos", "Arthur", "Warren", "Jose", "Philip", "Mason", "Louis"],
                lastNames: ["Smith", "Johnson", "Williams", "Brown", "Jones", "Miller", "Davis", "Garcia", "Rodriguez", "Wilson", "Martinez", "Anderson", "Taylor", "Thomas", "Hernandez", "Moore", "Martin", "Jackson", "Thompson", "White", "Lopez", "Lee", "Gonzalez", "Harris", "Clark", "Lewis", "Robinson", "Walker", "Perez", "Hall", "Young", "Allen", "Sanchez", "Wright", "King", "Scott", "Green", "Baker", "Adams", "Nelson", "Hill", "Ramirez", "Campbell", "Mitchell", "Roberts", "Carter", "Phillips", "Evans", "Turner", "Torres", "Parker", "Collins", "Edwards", "Stewart", "Flores", "Morris", "Nguyen", "Murphy", "Rivera", "Cook", "Rogers", "Morgan", "Peterson", "Cooper", "Reed", "Bailey", "Howard", "Ramos", "Kim", "Cox", "Ward", "Richardson", "Watson", "Brooks", "Chavez", "Wood", "James", "Bennett", "Gray", "Mendoza", "Ruiz", "Hughes", "Price", "Alvarez", "Castillo", "Sanders", "Patel", "Myers", "Long", "Ross", "Foster", "Jimenez"]
            },
            Female: {
                firstNames: ["Mary", "Patricia", "Jennifer", "Linda", "Elizabeth", "Barbara", "Susan", "Jessica", "Sarah", "Karen", "Nancy", "Lisa", "Betty", "Helen", "Sandra", "Donna", "Carol", "Ruth", "Sharon", "Michelle", "Laura", "Sarah", "Kimberly", "Deborah", "Dorothy", "Lisa", "Nancy", "Karen", "Betty", "Helen", "Sandra", "Donna", "Carol", "Ruth", "Sharon", "Michelle", "Laura", "Sarah", "Kimberly", "Deborah", "Dorothy", "Amy", "Angela", "Ashley", "Brenda", "Emma", "Olivia", "Cynthia", "Marie", "Janet", "Catherine", "Frances", "Christine", "Samantha", "Debra", "Rachel", "Carolyn", "Janet", "Virginia", "Maria", "Heather", "Diane", "Julie", "Joyce", "Victoria", "Kelly", "Christina", "Joan", "Evelyn", "Lauren", "Judith", "Megan", "Cheryl", "Andrea", "Hannah", "Jacqueline", "Martha", "Gloria", "Sara", "Janice", "Julia", "Marie", "Madison", "Mackenzie", "Amber", "Rachel", "Claire", "Samantha", "Diana", "Grace", "Sara", "Brittany", "Danielle", "Alexis", "Kathryn", "Lori", "Rose"],
                lastNames: ["Smith", "Johnson", "Williams", "Brown", "Jones", "Miller", "Davis", "Garcia", "Rodriguez", "Wilson", "Martinez", "Anderson", "Taylor", "Thomas", "Hernandez", "Moore", "Martin", "Jackson", "Thompson", "White", "Lopez", "Lee", "Gonzalez", "Harris", "Clark", "Lewis", "Robinson", "Walker", "Perez", "Hall", "Young", "Allen", "Sanchez", "Wright", "King", "Scott", "Green", "Baker", "Adams", "Nelson", "Hill", "Ramirez", "Campbell", "Mitchell", "Roberts", "Carter", "Phillips", "Evans", "Turner", "Torres", "Parker", "Collins", "Edwards", "Stewart", "Flores", "Morris", "Nguyen", "Murphy", "Rivera", "Cook", "Rogers", "Morgan", "Peterson", "Cooper", "Reed", "Bailey", "Howard", "Ramos", "Kim", "Cox", "Ward", "Richardson", "Watson", "Brooks", "Chavez", "Wood", "James", "Bennett", "Gray", "Mendoza", "Ruiz", "Hughes", "Price", "Alvarez", "Castillo", "Sanders", "Patel", "Myers", "Long", "Ross", "Foster", "Jimenez"]
            }
        },
        Soviet: {
            Male: {
                firstNames: ["Ivan", "Dmitri", "Sergei", "Alexei", "Viktor", "Nikolai", "Mikhail", "Vladimir", "Andrei", "Yuri", "Boris", "Pavel", "Anatoly", "Oleg", "Vasily", "Alexander", "Leonid", "Fyodor", "Georgi", "Konstantin", "Maxim", "Roman", "Artyom", "Anton", "Denis", "Evgeny", "Ilya", "Kirill", "Makar", "Nikita", "Pyotr", "Ruslan", "Stanislav", "Timur", "Valentin", "Yegor", "Zakhar", "Alexey", "Bogdan", "Danila", "Erik", "Fedor", "Gleb", "Igor", "Jaroslav", "Kazimir", "Lev", "Mark", "Oskar", "Platon", "Robert", "Slava", "Taras", "Ulrich", "Vadim", "Yaropolk", "Zinovy"],
                lastNames: ["Ivanov", "Petrov", "Sidorov", "Smirnov", "Kuznetsov", "Popov", "Volkov", "Sokolov", "Lebedev", "Kozlov", "Novikov", "Morozov", "Orlov", "Andreev", "Makarov", "Fedorov", "Mikhailov", "Sergeev", "Stepanov", "Yakovlev", "Solovyov", "Borisov", "Alexandrov", "Dmitriev", "Komarov", "Pavlov", "Grigoriev", "Lazarev", "Medvedev", "Nikitin", "Romanov", "Vinogradov", "Kovalev", "Belov", "Tarasov", "Belyaev", "Orlov", "Vasiliev", "Frolov", "Nikolaev", "Krylowski", "Zhivago", "Donskoy", "Volga", "Baryshnikov", "Chekhov", "Dostoyevsky", "Gagarin", "Khrushchev", "Lenin", "Molotov", "Rasputin", "Stalin", "Tolstoy", "Trotsky", "Zhukov"]
            },
            Female: {
                firstNames: ["Anya", "Katya", "Nastya", "Svetlana", "Olga", "Irina", "Elena", "Natasha", "Galina", "Tatyana", "Marina", "Lyudmila", "Valentina", "Nina", "Raisa", "Larisa", "Vera", "Tamara", "Lyubov", "Zoya", "Anna", "Maria", "Nadezhda", "Antonina", "Klavdiya", "Rosa", "Zinaida", "Polina", "Marfa", "Praskovya", "Evdokiya", "Fekla", "Matryona", "Darya", "Akulina", "Agafya", "Pelagya", "Efrosinya", "Mariya", "Oksana", "Yulia", "Kristina", "Alina", "Kira", "Zhanna", "Alla", "Rimma", "Inga", "Lilia", "Anzhelika", "Veronika", "Regina", "Diana", "Margarita", "Albina", "Elvira", "Nelli", "Stella", "Emiliya", "Emma", "Elza", "Violetta", "Zhanneta", "Evelina", "Adelina", "Kamilla", "Milena", "Snezhana", "Angelina", "Vladislava", "Elizaveta", "Anastasiya", "Aleksandra", "Viktoria"],
                lastNames: ["Ivanova", "Petrova", "Sidorova", "Smirnova", "Kuznetsova", "Popova", "Volkova", "Sokolova", "Lebedeva", "Kozlova", "Novikova", "Morozova", "Orlova", "Andreeva", "Makarova", "Fedorova", "Mikhailova", "Sergeeva", "Stepanova", "Yakovleva", "Solovyova", "Borisova", "Alexandrova", "Dmitrieva", "Komarova", "Pavlova", "Grigorieva", "Lazareva", "Medvedeva", "Nikitina", "Romanova", "Vinogradova", "Kovaleva", "Belova", "Tarasova", "Belyaeva", "Orlova", "Vasilieva", "Frolova", "Nikolaeva", "Krylovskaya", "Zhivago", "Donskaya", "Volga", "Baryshnikova", "Chekhova", "Dostoyevskaya", "Gagarina", "Khrushcheva", "Lenin", "Molotova", "Rasputina", "Stalina", "Tolstoya", "Trotskaya", "Zhukova"]
            }
        },
        Mercenary: {
            Male: {
                firstNames: ["Axel", "Blaze", "Cole", "Dante", "Edge", "Fox", "Ghost", "Hunter", "Jax", "Kane", "Lance", "Max", "Nick", "Oz", "Pike", "Rex", "Steel", "Tank", "Viper", "Wolf", "Zane", "Ace", "Bash", "Crow", "Duke", "Falcon", "Gunner", "Hawk", "Iron", "Jet", "Knox", "Lynx", "Mace", "Nash", "Onyx", "Phoenix", "Quinn", "Raven", "Spike", "Titan", "Venom", "Wraith", "Xerxes", "York", "Zeus", "Bear", "Colt", "Dagger", "Echo", "Frost", "Grim", "Havoc", "Ice", "Jinx", "Kilo", "Lash"],
                lastNames: ["Black", "Stone", "Steel", "Iron", "Wolf", "Fox", "Hawk", "Raven", "Cross", "Sharp", "Quick", "Storm", "Flame", "Frost", "Shadow", "Hunter", "Ranger", "Striker", "Viper", "Reaper", "Ghost", "Phantom", "Blade", "Edge", "Pierce", "Savage", "Wild", "Crimson", "Scarlet", "Silver", "Gold", "Diamond", "Thunder", "Lightning", "Tornado", "Hurricane", "Blizzard", "Avalanche", "Earthquake", "Tsunami", "Volcano", "Meteor", "Comet", "Star", "Galaxy", "Universe", "Cosmos", "Nebula", "Pulsar", "Quasar", "Supernova", "Blackhole", "Wormhole", "Portal", "Dimension"]
            },
            Female: {
                firstNames: ["Aria", "Blaze", "Cora", "Diana", "Echo", "Faye", "Grace", "Hana", "Iris", "Jade", "Kira", "Luna", "Maya", "Nova", "Onyx", "Phoenix", "Quinn", "Raven", "Sage", "Tara", "Uma", "Vera", "Wren", "Xara", "Yara", "Zara", "Angel", "Belle", "Cleo", "Dawn", "Eve", "Faith", "Gaia", "Hope", "Ivy", "Joy", "Kate", "Lux", "Mira", "Nyx", "Opal", "Piper", "Rain", "Star", "Vale", "Willow", "Xena", "Yin", "Zen", "Azure", "Crimson", "Delta", "Ember", "Frost", "Glow"],
                lastNames: ["Black", "Stone", "Steel", "Iron", "Wolf", "Fox", "Hawk", "Raven", "Cross", "Sharp", "Quick", "Storm", "Flame", "Frost", "Shadow", "Hunter", "Ranger", "Striker", "Viper", "Reaper", "Ghost", "Phantom", "Blade", "Edge", "Pierce", "Savage", "Wild", "Crimson", "Scarlet", "Silver", "Gold", "Diamond", "Thunder", "Lightning", "Tornado", "Hurricane", "Blizzard", "Avalanche", "Earthquake", "Tsunami", "Volcano", "Meteor", "Comet", "Star", "Galaxy", "Universe", "Cosmos", "Nebula", "Pulsar", "Quasar", "Supernova", "Blackhole", "Wormhole", "Portal", "Dimension"]
            }
        },
        Insurgent: {
            Male: {
                firstNames: ["Ahmed", "Muhammad", "Ali", "Hassan", "Omar", "Yusuf", "Ibrahim", "Ismail", "Abdullah", "Abdul Rahman", "Khalid", "Mahmoud", "Rashid", "Tariq", "Salim", "Hamza", "Bilal", "Usman", "Zakariya", "Marwan", "Nasser", "Faisal", "Saeed", "Adnan", "Waleed", "Zaid", "Karim", "Majid", "Sami", "Tamer", "Fahd", "Rami", "Sherif", "Wael", "Amjad", "Bassam", "Ghassan", "Hani", "Jamal", "Karam", "Laith", "Mazen", "Nabeel", "Osama", "Qasim", "Raed", "Samir", "Talal", "Usama", "Waseem", "Yasser", "Ziyad", "Aziz", "Badr", "Daud", "Emad"],
                lastNames: ["Al-Rashid", "Al-Mahmoud", "Al-Hassan", "Al-Ahmad", "Al-Ali", "Al-Omar", "Al-Ibrahim", "Al-Khalil", "Al-Nasser", "Al-Mansour", "Al-Sabah", "Al-Thani", "Al-Maktoum", "Al-Saud", "Al-Hashemi", "Al-Qasimi", "Al-Nahyan", "Al-Sabah", "Bin Laden", "Bin Rashid", "Bin Ahmad", "Bin Ali", "Bin Omar", "Bin Hassan", "Ibn Sina", "Ibn Khaldun", "Ibn Battuta", "Ibn Rushd", "Ibn Taymiyyah", "Abu Bakr", "Abu Omar", "Abu Ahmad", "Abu Ali", "Abu Hassan", "Abu Yusuf", "Abu Ibrahim", "Abu Abdullah", "Abu Rahman", "Abu Khalil", "Abu Nasser", "Abu Mansour", "Abu Sabah", "Abu Thani", "Abu Maktoum", "Abu Saud", "Abu Hashemi", "Abu Qasimi", "Abu Nahyan", "Abu Sabah"]
            },
            Female: {
                firstNames: ["Fatima", "Aisha", "Khadija", "Zainab", "Maryam", "Hafsa", "Ruqayya", "Umm Kulthum", "Asma", "Safiya", "Juwayriya", "Maymuna", "Sawda", "Zaynab", "Hind", "Layla", "Sumayyah", "Khawla", "Nusaybah", "Umm Salama", "Umm Habiba", "Ramlah", "Saffiya", "Haleema", "Barakah", "Thuwaybah", "Halimah", "Aminah", "Hawwa", "Sarah", "Hajar", "Asiyah", "Mariam", "Khadijah", "Aishah", "Zaynab", "Ruqayyah", "Umm Kulthum", "Fatimah", "Sakinah", "Sukainah", "Zubaidah", "Rabia", "Shuhda", "Umm Waraqa", "Khansa", "Umm Anmar", "Hamnah", "Salma", "Najla", "Widad", "Soraya", "Samira", "Leila", "Nadia"],
                lastNames: ["Al-Rashida", "Al-Mahmoud", "Al-Hassan", "Al-Ahmad", "Al-Ali", "Al-Omar", "Al-Ibrahim", "Al-Khalil", "Al-Nasser", "Al-Mansour", "Al-Sabah", "Al-Thani", "Al-Maktoum", "Al-Saud", "Al-Hashemi", "Al-Qasimi", "Al-Nahyan", "Al-Sabah", "Bint Laden", "Bint Rashid", "Bint Ahmad", "Bint Ali", "Bint Omar", "Bint Hassan", "Ibn Sina", "Ibn Khaldun", "Ibn Battuta", "Ibn Rushd", "Ibn Taymiyyah", "Abu Bakr", "Abu Omar", "Abu Ahmad", "Abu Ali", "Abu Hassan", "Abu Yusuf", "Abu Ibrahim", "Abu Abdullah", "Abu Rahman", "Abu Khalil", "Abu Nasser", "Abu Mansour", "Abu Sabah", "Abu Thani", "Abu Maktoum", "Abu Saud", "Abu Hashemi", "Abu Qasimi", "Abu Nahyan", "Abu Sabah"]
            }
        }
    };

    // Physical appearance generation
    const appearanceTraits = {
        Male: {
            height: ["5'6\"", "5'7\"", "5'8\"", "5'9\"", "5'10\"", "5'11\"", "6'0\"", "6'1\"", "6'2\"", "6'3\""],
            build: ["lean", "athletic", "stocky", "muscular", "lanky", "compact", "robust", "wiry", "broad-shouldered", "barrel-chested"],
            eyeColor: ["brown", "blue", "green", "hazel", "dark brown", "light blue", "gray", "amber"],
            hairColor: ["black", "dark brown", "brown", "light brown", "blonde", "dirty blonde", "red", "auburn", "gray", "salt-and-pepper"],
            hairStyle: ["short military cut", "buzz cut", "crew cut", "close-cropped", "slightly wavy", "straight", "curly", "receding", "balding", "shaved head"],
            facialHair: ["clean-shaven", "mustache", "goatee", "full beard", "stubble", "sideburns", "soul patch", "van dyke", "handlebar mustache"],
            complexion: ["fair", "olive", "tan", "dark", "pale", "ruddy", "weathered", "sun-kissed", "freckled"],
            distinguishingFeatures: ["scar on cheek", "crooked nose", "prominent jaw", "piercing eyes", "thick eyebrows", "dimpled chin", "high cheekbones", "square jaw", "cleft chin", "battle scars", "tattoo on arm", "missing tooth", "weathered hands", "calloused fingers"]
        },
        Female: {
            height: ["5'2\"", "5'3\"", "5'4\"", "5'5\"", "5'6\"", "5'7\"", "5'8\"", "5'9\"", "5'10\""],
            build: ["petite", "athletic", "slender", "curvy", "lean", "compact", "statuesque", "willowy", "strong", "graceful"],
            eyeColor: ["brown", "blue", "green", "hazel", "dark brown", "light blue", "gray", "amber"],
            hairColor: ["black", "dark brown", "brown", "light brown", "blonde", "dirty blonde", "red", "auburn", "strawberry blonde"],
            hairStyle: ["short bob", "pixie cut", "shoulder-length", "long and straight", "wavy", "curly", "ponytail", "braided", "military regulation short", "tightly pulled back"],
            complexion: ["fair", "olive", "tan", "dark", "pale", "rosy", "sun-kissed", "freckled", "smooth"],
            distinguishingFeatures: ["bright smile", "sharp eyes", "high cheekbones", "defined jawline", "expressive eyebrows", "small scar", "tattoo", "pierced ears", "strong hands", "graceful movements", "confident posture", "keen gaze", "determined expression"]
        }
    };

    // Expanded Modern Era Equipment
    const modernHelmets = {
        Western: [
            "M1 Helmet", "PASGT Helmet", "MICH TC-2000", "MK6 Helmet", 
            "SPECTRA Helmet", "SSh-68 (Captured)", "Brodie Helmet (Reserve)",
            "Pro-Tec Skate Helmet (SF)", "Rhino II Paratrooper Helmet",
            "CGF Combat Helmet (Canada)", "M92 Helmet (Germany)", "ACH Helmet",
            "ECH Helmet", "FAST Helmet", "Team Wendy EXFIL", "Ops-Core FAST"
        ],
        Soviet: [
            "SSh-40", "SSh-60", "SSh-68", "ZSH-1-2M", "6B6 Helmet",
            "Tanker Helmet TK-3", "VZM-1 Paratrooper Helmet",
            "KZS-2 Fiberglass Helmet", "Altyn (Early Prototype)",
            "Czech M53 Helmet", "Polish Wz.50", "6B7 Helmet", "6B27 Helmet",
            "6B47 Ratnik Helmet", "K6-3 Helmet", "ZSH-1-2"
        ],
        Mercenary: [
            "Ops-Core FAST", "Team Wendy EXFIL", "Crye Precision Airframe",
            "MICH 2000", "ACH Helmet", "PASGT (Surplus)", "Custom Painted FAST",
            "Mixed Faction Helmet", "Commercial Bump Helmet", "Surplus M1",
            "Captured Enemy Helmet", "High-Cut Special Forces Helmet",
            "Custom Modified Helmet", "Wilcox Headborne System"
        ],
        Insurgent: [
            "Civilian Hard Hat", "Sports Helmet", "No Helmet", "Bandana",
            "Shemagh", "Baseball Cap", "Beanie", "Captured Army Helmet",
            "Soviet SSh-68", "PASGT (Captured)", "Motorcycle Helmet",
            "Construction Helmet", "Improvised Armored Headgear",
            "Turban", "Head Wrap", "Peaked Cap"
        ]
    };

    const modernArmor = {
        Western: [
            "M1952A Flak Vest", "PASGT Vest", "RBA Vest (UK)", 
            "IBA (Interceptor) Early Version", "SAS Smock (Reinforced)",
            "German KSK Splinter Vest", "French Gilet Para",
            "USMC PACA (1980s)", "ALICE Webbing System",
            "Israeli RZ 76-1 Vest", "SPCS Plate Carrier", "IOTV",
            "CIRAS Maritime", "JPC Plate Carrier", "Crye Precision AVS"
        ],
        Soviet: [
            "6B2 Vest", "6B3 Zh-85", "6B5-15", "ChZh-81 Chest Rig",
            "Soviet SN-42 (Surplus)", "Bulgarian Breastplate M1972",
            "Polish Kamizelka Wz.89", "East German Kampfweste",
            "Czech VZ.53", "Hungarian M59 Flak Jacket", "6B13 Vest",
            "6B23 Vest", "6B45 Ratnik Vest", "Partizan Harness System"
        ],
        Mercenary: [
        "Crye Precision AVS", "First Spear Strandhogg", "LBT 6094",
        "Mayflower APC", "Spiritus Systems LV-119", "Haley Strategic D3CRX",
        "Commercial Plate Carrier", "IOTV (Surplus)", "Mixed Faction Armor",
        "Customized Chest Rig", "Surplus Flak Vest", "Lightweight Carrier",
        "High-End Tactical Vest", "Modified Military Armor",
        "Crye JPC", "Velocity Systems Scarab"
        ],
        Insurgent: [
        "Improvised Armor", "Civilian Vest", "No Armor", "Chest Rig",
        "Webbing Only", "Captured Body Armor", "Repurposed Sports Gear",
        "Soviet 6B3 Vest", "PASGT (Captured)", "DIY Plate Carrier",
        "Vehicle Armor Plates", "Flak Jacket from Junkyard",
        "Motorcycle Armor", "Construction Safety Gear"
        ]
    };

    // Expanded primary weapons with more variety
    const modernPrimaryWeapons = {
        Western: {
            Sniper: [
                "M21 Sniper Weapon System", "M40A1", "M24", "HK PSG1", 
                "Walther WA 2000", "FR-F1 (France)", "L42A1 Enfield",
                "Sako TRG-21", "Steyr SSG 69", "M14 Sniper Variant",
                "Barrett M82A1", "Accuracy International AWM",
                "CheyTac Intervention", "Desert Tech SRS", "Blaser R93"
            ],
            MachineGunner: [
                "M60", "M249 (Early Model)", "FN MAG", "Bren L4", 
                "MG3 (West German)", "Stoner 63", "M1919A6 (Reserve)",
                "HK21", "Ultimax 100 (Early Model)", "AAT-52 (France)",
                "M240B", "Mk 48", "HK MG5", "Negev NG7", "KAC LAMG"
            ],
            Rifleman: [
                "M16A1", "M16A2", "FN FAL", "G3A3", "Steyr AUG A1",
                "L1A1 SLR", "Beretta AR70", "SIG SG 542",
                "IMI Galil ARM", "Daewoo K2", "M14", "M1 Garand (Reserve)",
                "H&K G41", "FAMAS F1", "CETME Model L", "HK416", "SCAR-L",
                "Bushmaster ACR", "Tavor TAR-21", "CZ BREN 2"
            ],
            Grenadier: [
                "M16A1 with M203", "M79 Thumper", "HK69A1",
                "FN FALO with Energa", "M1A1 Carbine with M8 Launcher",
                "L1A1 with SUIT Sight", "BM-59 with GL", "M4 with M320",
                "HK416 with AG36", "SCAR-H with EGLM", "Tavor with GL"
            ],
            AntiTank: [
                "M3A1 Grease Gun", "Sterling L2A3", "Carl Gustaf M2",
                "M20 Super Bazooka", "M67 Recoilless Rifle",
                "LAW 80 (UK)", "MATADOR (Early Model)", "FGM-148 Javelin",
                "SMAW", "AT4", "Panzerfaust 3", "MBT LAW"
            ],
            Tanker: [
                "M3 Grease Gun", "Sterling SMG", "Uzi", "MAC-10",
                "Beretta M12", "S&W 76", "M1 Carbine (Tanker Model)",
                "MP5", "MP7", "P90", "B&T APC9"
            ],
            Medic: [
                "M4 Carbine", "HK G36C", "SIG SG 552", "M1A1 Carbine",
                "Short-Barreled AR-15", "Compact Battle Rifle"
            ],
            Engineer: [
                "M16A2", "HK G36", "SIG SG 550", "Shotgun (Breaching)",
                "Compact Carbine", "Folding Stock Rifle"
            ],
            Recon: [
                "Mk 12 SPR", "HK417", "SCAR-H", "SR-25", "L129A1",
                "Designated Marksman Rifle", "Recce Rifle"
            ]
        },
        Soviet: {
            Sniper: [
                "SVD Dragunov", "SV-98", "VSS Vintorez", "Mosin Nagant PU",
                "PSL (Romak-3)", "KSVK 12.7mm", "Tabuk Sniper (Iraq)",
                "Zastava M76", "SWD-M (China)", "SVU-A", "OSV-96",
                "VSSK Vychlop", "T-5000", "SV-99"
            ],
            MachineGunner: [
                "PKM", "RPK-74", "RPD", "DP-28 (Reserve)", "SG-43 Gorunov",
                "UKM-2000 (Polish)", "KPV Heavy MG", "NSV Utyos", "PKP Pecheneg",
                "RPK-16", "AEK-999", "Type 80 (China)"
            ],
            Rifleman: [
                "AKM", "AK-74", "AKS-74U", "AK-47 Type 3", "AMD-65",
                "PM md. 63/65 (Romania)", "Wz. 88 Tantal (Poland)",
                "Norinco Type 56", "Vz. 58 (Czech)", "MPi-KMS (East Germany)",
                "AK-74N (Night Vision)", "AN-94 Abakan (Prototype)",
                "TKB-022PM (Experimental)", "AS Val (1980s)", "AK-12",
                "AK-15", "AK-100 Series", "AEK-971", "OTs-14 Groza"
            ],
            Grenadier: [
                "AKM with GP-25", "AK-74 with GP-30", "RPG-75",
                "RPG-18 Mukha", "AGS-17 Plamya", "RG-6 Revolver Grenade Launcher",
                "AK-12 with GP-34", "OTs-14 with Grenade Launcher"
            ],
            AntiTank: [
                "RPG-7V", "RPG-16", "SPG-9", "9K111 Fagot", 
                "9M14 Malyutka", "RPG-29 Vampir (Prototype)",
                "B-10 Recoilless Rifle", "9K115-2 Metis-M", "RPG-32",
                "9K135 Kornet", "RShG-1"
            ],
            Tanker: [
                "APS Stechkin", "PPSh-41 (Reserve)", "PP-91 KEDR",
                "AKS-74U", "OTs-02 Kiparis", "PP-19 Bizon (Early Model)",
                "PP-2000", "SR-2 Veresk", "Vityaz-SN"
            ],
            Medic: [
                "AKS-74U", "AK-102", "AK-104", "Compact AK Variant",
                "Shortened Rifle"
            ],
            Engineer: [
                "AK-74", "AKM", "Shotgun", "Compact Rifle", "Folding Stock AK"
            ],
            Recon: [
                "SVDS", "VSS Vintorez", "AS Val", "AK-74 with Optics",
                "Designated Marksman AK", "Sniper AK Variant"
            ]
        },
       Mercenary: {
        Sniper: [
            "Accuracy International AXMC", "Barrett MRAD", "Sako TRG-42",
            "Desert Tech HTI", "CheyTac M200", "PGM Ultima Ratio",
            "Knights Armament M110", "Remington MSR", "Custom .338 Lapua",
            "Surplus M24", "Dragunov SVD", "Mixed Faction Sniper Rifle"
        ],
        MachineGunner: [
            "FN Mk 48", "M240L", "PKP Pecheneg", "M60E6", "HK MG5",
            "Negev NG7", "KAC LAMG", "M249 Para", "RPK-16", "Custom Belt-fed"
        ],
        Rifleman: [
            "HK416", "SCAR-L", "Bushmaster ACR", "Tavor TAR-21", "CZ BREN 2",
            "Custom AR-15", "AK-74M", "AK-103", "AK-15", "SIG MCX",
            "Robinson XCR", "Desert Tech MDR", "Mixed Faction Assault Rifle"
        ],
        Grenadier: [
            "HK416 with M320", "SCAR-L with EGLM", "AK-74 with GP-34",
            "Standalone M32 MGL", "Milkor MGL", "RGP-40",
            "Custom Grenade Launcher Setup"
        ],
        AntiTank: [
            "FGM-148 Javelin", "RPG-29 Vampir", "RPG-7V2 with Tandem",
            "Panzerfaust 3", "AT4", "M72 LAW", "MATADOR",
            "9K135 Kornet", "Mixed AT Systems"
        ],
        Tanker: [
            "MP5", "MP7", "UMP45", "B&T APC9", "Sig MPX", "AKS-74U",
            "PP-19-01 Vityaz", "Personal Defense Weapon"
        ],
        Medic: [
            "HK G36C", "SIG SG 553", "Short-barreled AR-15", "AK-105",
            "Compact Battle Rifle", "SMG for Medical Operations"
        ],
        Engineer: [
            "M4 Carbine", "HK G36", "AK-104", "Shotgun for Breaching",
            "Compact Carbine with Tools", "Folding Stock Rifle"
        ],
        Recon: [
            "HK417", "SCAR-H", "SR-25", "Mk 20 SSR", "VSS Vintorez",
            "AS Val", "Designated Marksman Rifle"
        ]
    },
    Insurgent: {
        Sniper: [
            "Mosin-Nagant with PU Scope", "SVD Dragunov", "Tabuk Sniper Rifle",
            "Lee-Enfield with Scope", "Mauser K98k Sniper", "Hunting Rifle .308",
            "DIY Sniper from Hunting Rifle", "PSL Romak-3", "Zastava M76",
            "Improvised Sniper Platform"
        ],
        MachineGunner: [
            "PKM", "RPD", "M60", "FN MAG", "RPK", "MG3", "M249 SAW",
            "Bren Gun (Repurposed)", "DP-28", "Converted AK as LMG",
            "Belt-fed from Technical", "DIY Machine Gun"
        ],
        Rifleman: [
            "AK-47", "AKM", "Type 56", "SKS", "M16A2", "M4 Carbine",
            "FN FAL", "G3", "Lee-Enfield", "M1 Garand", "Hunting Rifle",
            "Shotgun", "Whatever Available", "Homemade Firearm"
        ],
        Grenadier: [
            "RPG-7", "RPG-2", "Improvised Grenade Launcher", "M79 Thumper",
            "GP-25 on AK", "Rifle Grenade Adapter", "DIY Rocket Launcher",
            "Captured M203", "Standalone Grenade System"
        ],
        AntiTank: [
            "RPG-7 with HEAT", "RPG-29", "SPG-9", "IED", "EFP",
            "Homemade Anti-tank Mine", "Captured AT4", "RPG-18 Mukha",
            "Improvised AT Device", "Vehicle-born IED"
        ],
        Tanker: [
            "Tokarev TT-33", "Makarov PM", "AKS-74U", "PPSh-41",
            "Sten Gun", "Improvised SMG", "Sawn-off Shotgun",
            "Pistol for Close Defense"
        ],
        Medic: [
            "Pistol Only", "SKS Carbine", "M1 Carbine", "AKS-74U",
            "Minimal Weapon for Mobility", "No Weapon (Red Cross)"
        ],
        Engineer: [
            "AK-47", "Shotgun", "SMG", "Breaching Tools as Primary",
            "Improvised Explosives", "Demolition Equipment"
        ],
        Recon: [
            "Scoped Mosin-Nagant", "SKS with Scope", "AK with Optics",
            "Hunting Rifle", "Designated Marksman Rifle", "Sniper System"
        ]
    }
};

    const nearFutureArmor = {
        Western: [
            "IOTV Gen IV", "SPCS Advanced", "Future Force Warrior System",
            "Tactical Assault Light Operator Suit (TALOS)",
            "Integrated Plate Carrier System", "Exoskeleton-Compatible Armor"
        ],
        Soviet: [
            "Ratnik-3 Armor System", "Future Soldier Exosuit",
            "Integrated Combat Armor", "Advanced Body Protection System"
        ],
        Mercenary: [
            "Commercial Advanced Armor", "Custom Tactical System",
            "Modified Military Armor", "High-End Protection"
        ],
        Insurgent: [
            "Captured Advanced Armor", "Improvised High-Tech Protection",
            "Commercial Body Armor", "Mixed Protection System"
        ]
    };

    // Character traits and backgrounds
    const characterTraits = [
        "Quiet and observant", "Aggressive and direct", "Calm under pressure",
        "Nervous but competent", "Humorous and lighthearted", "Serious and focused",
        "Team player", "Lone wolf", "By-the-book", "Improviser",
        "Risk-taker", "Cautious", "Leader", "Follower", "Mentor", "Student",
        "Pragmatic and efficient", "Ideologically driven", "Money-motivated",
        "Loyal to comrades", "Cynical veteran", "Young and eager",
        "Disciplined professional", "Unconventional thinker", "Traditionalist",
        "Innovative tactician", "Predictable but reliable", "Unpredictable wildcard",
        "Methodical planner", "Impulsive decision-maker", "Cold and calculating",
        "Emotional and passionate", "Stoic and unreadable", "Chatty and social",
        "Superstitious", "Technical expert", "Brute force specialist"
    ];

    const backgrounds = {
        Western: [
            "Regular Army", "Special Forces", "Reservist", "National Guard",
            "Contractor", "Law Enforcement", "Private Military", "Volunteer"
        ],
        Soviet: [
            "Regular Army", "Spetsnaz", "Conscript", "VDV (Airborne)",
            "Border Guards", "Internal Troops", "Militia", "Volunteer"
        ],
        Mercenary: [
            "Former Special Forces", "Ex-Military", "Adventurer", "Gun for Hire",
            "Survivalist", "Professional Soldier", "Freedom Fighter",
            "Corporate Security", "Private Military Contractor", "Wagner Veteran",
            "Blackwater Operative", "Executive Outcomes Alumni",
            "Military Contractor", "Security Consultant", "Combat Veteran"
        ],
        Insurgent: [
            "Freedom Fighter", "Local Militia", "Volunteer", "Conscripted",
            "Ideological Fighter", "Mercenary", "Local Defender",
            "Tribal Warrior", "Religious Fighter", "Political Activist",
            "Former Soldier", "Civilian Turned Fighter", "Student Protestor",
            "Farmers' Militia", "Urban Guerrilla", "Mountain Fighter"
        ]
    };

    const specialties = {
        Urban: ["CQB Specialist", "Room Clearing Expert", "Urban Sniper"],
        Woodland: ["Tracker", "Wilderness Expert", "Camouflage Master"],
        Desert: ["Desert Survival Expert", "Long-Range Specialist"],
        Arctic: ["Cold Weather Expert", "Winter Warfare Specialist"],
        NightOps: ["Night Vision Expert", "Low-Light Specialist"],
        Airborne: ["Paratrooper", "Air Assault Expert"],
        Maritime: ["Combat Diver", "Naval Infantry", "Beach Assault Expert"]
    };

    // Function to get random item from array
    function getRandomItem(arr) {
        return arr[Math.floor(Math.random() * arr.length)];
    }

    // Function to generate appearance description
    function generateAppearance(gender, faction) {
        const traits = appearanceTraits[gender];
        const height = getRandomItem(traits.height);
        const build = getRandomItem(traits.build);
        const eyeColor = getRandomItem(traits.eyeColor);
        const hairColor = getRandomItem(traits.hairColor);
        const hairStyle = getRandomItem(traits.hairStyle);
        const complexion = getRandomItem(traits.complexion);
        const distinguishing = getRandomItem(traits.distinguishingFeatures);
        
        let description = `Standing at ${height} with a ${build} build, this soldier has ${eyeColor} eyes and ${hairColor} hair worn in a ${hairStyle}. `;
        description += `Their ${complexion} complexion shows signs of field experience, and they are notably recognized by their ${distinguishing}. `;
        
        if (gender === "Male") {
            const facialHair = getRandomItem(traits.facialHair);
            description += `They maintain a ${facialHair} appearance that fits military standards.`;
        } else {
            description += `They carry themselves with a confident and professional demeanor.`;
        }
        
        return description;
    }

    // Function to generate a random name based on faction and gender
    function generateRandomName(faction, gender) {
        let nameFaction = faction;
        if (faction === "All") {
            nameFaction = getRandomItem(["Western", "Soviet"]);
        }
        
        const names = nameBank[nameFaction];
        if (!names || !names[gender]) {
            // Fallback to Western names if faction doesn't exist
            const firstName = getRandomItem(nameBank.Western[gender].firstNames);
            const lastName = getRandomItem(nameBank.Western[gender].lastNames);
            return `${firstName} ${lastName}`;
        }
        
        const firstName = getRandomItem(names[gender].firstNames);
        const lastName = getRandomItem(names[gender].lastNames);
        return `${firstName} ${lastName}`;
    }

    // Function to generate a callsign
    function generateCallsign() {
        const prefixes = ["Alpha", "Bravo", "Charlie", "Delta", "Echo", "Foxtrot", 
                         "Ghost", "Hunter", "Viper", "Shadow", "Raven", "Wolf"];
        const suffixes = ["1", "2", "3", "Actual", "Leader", "Sniper", "Gunner", 
                         "Medic", "Engineer", "Recon", "Six"];
        return `${getRandomItem(prefixes)}-${getRandomItem(suffixes)}`;
    }

    // Function to generate character backstory
    function generateBackstory(faction, specialization, className) {
        const background = getRandomItem(backgrounds[faction]);
        const trait = getRandomItem(characterTraits);
        const specialty = getRandomItem(specialties[specialization] || ["Specialist"]);
        
        return `${background} with a ${specialty} qualification. Known for being ${trait}.`;
    }

    // Function to open tabs
    function openTab(evt, tabName) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(tabName).style.display = "block";
        evt.currentTarget.className += " active";
    }

    // Function to randomize all options
    function randomizeAll() {
        const eras = ["Modern", "WW2", "NearFuture"];
        const factions = ["Western", "Soviet", "All", "Mercenary", "Insurgent"];
        const classes = ["Sniper", "MachineGunner", "Rifleman", "Grenadier", 
                        "AntiTank", "Tanker", "Medic", "Engineer", "Recon"];
        const specializations = ["Standard", "Urban", "Woodland", "Desert", 
                                "Arctic", "NightOps", "Airborne", "Maritime"];
        const genders = ["Male", "Female"];
        
        const selectedFaction = getRandomItem(factions);
        const selectedGender = getRandomItem(genders);
        
        document.getElementById("era").value = getRandomItem(eras);
        document.getElementById("faction").value = selectedFaction;
        document.getElementById("class").value = getRandomItem(classes);
        document.getElementById("specialization").value = getRandomItem(specializations);
        document.getElementById("gender").value = selectedGender;
        
        // Generate a random name based on faction and gender
        document.getElementById("characterName").value = generateRandomName(selectedFaction, selectedGender);
        
        generateLoadout();
    }

    // Function to save the current loadout
    function saveLoadout() {
        const loadoutElement = document.getElementById("loadout");
        if (!loadoutElement.innerHTML) {
            alert("Please generate a loadout first!");
            return;
        }
        
        // Use in-memory storage instead of localStorage for Claude.ai compatibility
        if (!window.savedLoadoutsData) {
            window.savedLoadoutsData = [];
        }
        
        const loadoutData = {
            name: document.getElementById("characterName").value || "Unnamed Soldier",
            era: document.getElementById("era").value,
            faction: document.getElementById("faction").value,
            class: document.getElementById("class").value,
            specialization: document.getElementById("specialization").value,
            gender: document.getElementById("gender").value,
            html: loadoutElement.innerHTML,
            timestamp: new Date().toLocaleString()
        };
        
        window.savedLoadoutsData.push(loadoutData);
        
        alert("Character saved!");
        displaySavedLoadouts();
    }

    // Function to display saved loadouts
    function displaySavedLoadouts() {
        const savedLoadouts = window.savedLoadoutsData || [];
        const container = document.getElementById("savedLoadouts");
        
        if (savedLoadouts.length === 0) {
            container.innerHTML = "<p>No saved characters yet.</p>";
            return;
        }
        
        container.innerHTML = savedLoadouts.map((loadout, index) => `
            <div class="loadout-item" onclick="loadSavedLoadout(${index})">
                <strong>${loadout.name}</strong> - ${loadout.gender} ${loadout.era} ${loadout.faction} ${loadout.class}<br>
                <small>Saved: ${loadout.timestamp}</small>
            </div>
        `).join("");
    }

    // Function to load a saved loadout
    function loadSavedLoadout(index) {
        const savedLoadouts = window.savedLoadoutsData || [];
        if (index >= 0 && index < savedLoadouts.length) {
            const loadout = savedLoadouts[index];
            document.getElementById("characterName").value = loadout.name;
            document.getElementById("era").value = loadout.era;
            document.getElementById("faction").value = loadout.faction;
            document.getElementById("class").value = loadout.class;
            document.getElementById("specialization").value = loadout.specialization;
            document.getElementById("gender").value = loadout.gender || "Male";
            document.getElementById("loadout").innerHTML = loadout.html;
            openTab(event, 'Generator');
        }
    }

    // Function to generate OC details
    function generateOCDetails(faction, specialization, className, characterName, gender) {
        const callsign = generateCallsign();
        const backstory = generateBackstory(faction, specialization, className);
        const appearance = generateAppearance(gender, faction);
        
        return `
            <div class="oc-details">
                <h3>${characterName || "Unnamed Soldier"} - "${callsign}"</h3>
                <div class="character-image">Character Portrait</div>
                <div class="appearance-details">
                    <h4>Physical Appearance:</h4>
                    <p>${appearance}</p>
                </div>
                <p><strong>Gender:</strong> ${gender}</p>
                <p><strong>Background:</strong> ${backstory}</p>
                <p><strong>Specialization:</strong> ${specialization} Operations</p>
                <p><strong>Role:</strong> ${className}</p>
                <p><strong>Faction:</strong> ${faction}</p>
                <p><strong>Notable Traits:</strong> ${getRandomItem(characterTraits)}</p>
                <p><strong>Preferred Engagement Range:</strong> ${getRandomItem(["Close Quarters", "Medium Range", "Long Range"])}</p>
                <p><strong>Combat Style:</strong> ${getRandomItem(["Methodical", "Aggressive", "Adaptive", "Stealthy"])}</p>
            </div>
        `;
    }

    // Main loadout generation function
    function generateLoadout() {
        const era = document.getElementById("era").value;
        const faction = document.getElementById("faction").value;
        const selectedClass = document.getElementById("class").value;
        const specialization = document.getElementById("specialization").value;
        const characterName = document.getElementById("characterName").value;
        const gender = document.getElementById("gender").value;

        // Equipment pools based on era
        let helmetsPool, armorPool, primaryWeaponsPool;

        if (era === "Modern") {
            helmetsPool = modernHelmets;
            armorPool = modernArmor;
            primaryWeaponsPool = modernPrimaryWeapons;
        } else if (era === "NearFuture") {
            helmetsPool = modernHelmets; // Use modern helmets for now
            armorPool = nearFutureArmor;
            primaryWeaponsPool = modernPrimaryWeapons; // Use modern weapons for now
        } else { // WW2 - would need WW2 equipment defined
            helmetsPool = modernHelmets; // Fallback to modern for now
            armorPool = modernArmor;
            primaryWeaponsPool = modernPrimaryWeapons;
        }

        // Generate loadout items
        const helmet = getRandomItem(
            faction === "All" ? 
            helmetsPool.Western.concat(helmetsPool.Soviet) : 
            helmetsPool[faction] || helmetsPool.Western
        );

        let bodyArmor = getRandomItem(
            faction === "All" ? 
            armorPool.Western.concat(armorPool.Soviet) : 
            armorPool[faction] || armorPool.Western
        );
        
        if (selectedClass === "Tanker") {
            bodyArmor = era === "Modern" ? "Light Rig" : "Tanker's Equipment Belt";
        }

        const primaryWeapon = getRandomItem(
            faction === "All" ? 
            primaryWeaponsPool.Western[selectedClass].concat(primaryWeaponsPool.Soviet[selectedClass]) : 
            (primaryWeaponsPool[faction] && primaryWeaponsPool[faction][selectedClass]) ? 
            primaryWeaponsPool[faction][selectedClass] : 
            primaryWeaponsPool.Western[selectedClass]
        );

        // Generate secondary weapon
        const secondaryWeapons = ["M1911", "Glock 17", "Beretta M9", "SIG P226", "Makarov PM", "Tokarev TT-33", "CZ 75", "Walther P38"];
        const secondaryWeapon = getRandomItem(secondaryWeapons);

        // Generate grenades
        const grenades = ["M67 Frag", "M84 Stun", "M18 Smoke", "RGD-5", "F1 Grenade", "Flashbang", "Smoke Grenade"];
        const grenade = getRandomItem(grenades);

        // Generate final character name if empty
        const finalName = characterName || generateRandomName(faction, gender);

        // Generate OC details
        const ocDetails = generateOCDetails(faction, specialization, selectedClass, finalName, gender);

        // Display the loadout
        document.getElementById("loadout").innerHTML = `
            <h2>${finalName}'s ${era} ${faction === "All" ? "Mixed Faction" : faction} ${selectedClass} Loadout:</h2>
            <ul>
                <li><strong>Name:</strong> ${finalName}</li>
                <li><strong>Gender:</strong> ${gender}</li>
                <li><strong>Helmet:</strong> ${helmet}</li>
                <li><strong>Body Armor:</strong> ${bodyArmor}</li>
                <li><strong>Primary Weapon:</strong> ${primaryWeapon}</li>
                <li><strong>Secondary Weapon:</strong> ${secondaryWeapon}</li>
                <li><strong>Grenades:</strong> ${grenade}</li>
                <li><strong>Specialization:</strong> ${specialization}</li>
            </ul>
            ${ocDetails}
        `;

        // Update OC details tab
        document.getElementById("ocDetailsContainer").innerHTML = ocDetails;
    }

    // Initialize the page
    window.onload = function() {
        displaySavedLoadouts();
    };
</script>
</body>
</html>
